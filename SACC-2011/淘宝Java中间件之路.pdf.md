Java
SACC2011

About me

· : · : · -- ·  http://rdc.taobao.com/team/jm/ · Sina @_ · Twitter @vanadies10

SACC2011

Agenda · Java · Java · Java
SACC2011

Java
SACC2011

2007
LoadBalance

CDN

WebApp

WebApp



 Cache 



DB

DB

SACC2011

Java
 

SACC2011

-Notify
SACC2011



· Message-oriented middleware (MOM) is software infrastructure focused on sending and receiving messages between distributed systems.
--- from wikipedia.org

Application A

Application B

Application Programming Interface

· MOM ­  ­ 

Message Oriented Middleware
SACC2011



 Do something

  Do action

DB
·  
SACC2011

-
·  ·  · 

SACC2011

-

 Publisher

T4



T1 T3     hal  f  

T5 S1   /     


Notify 

S2/

T2half
S3 : T6:
 

Storage
SACC2011

-

 

SubscriberA

A1 A2

Publisher

Notify

SubscriberB

B1 B2

A1A2SystemA A1A2SystemA

B1B2

SACC2011

-Queue In JMS · ClientId

(1-8)

JMS Server

Queue

A1 A2 B1 B2 15 26 37 48
SACC2011

-Topic In JMS

· ClientId

A1

1-8

(1-8) JMS Server

Topic

A2 1-8 B1 1-8

B2 1-8
SACC2011

-
· Oracle++ · Mysql · Mysql Replication ·  · .

SACC2011

Notify

LoadBalance

CDN

WebApp

WebApp







 Cache 





(Notify)

DB

DB

SACC2011

-HSF
SACC2011

-
·  ­ 
·  · 
SACC2011


-

 

 

 

 

 

 

 

 







  

  
SACC2011

- · Spring Bean ·  · .
SACC2011

 · 



How



SACC2011

 · 



How



SACC2011

 · 
 
 



SACC2011

-

HSF


HSF
 

 

 
HSF

 

 
HSF


SACC2011

-

HSF


HSF
 

 

 
HSF

 

 
HSF


SACC2011

-


HSF

HSF


   

SACC2011

-


 


 
HSF
 
HSF
SACC2011

HSF

LoadBalance

CDN

WebApp

WebApp



  Cache 

(HSF)

 



(Notify)

Service

Service

DB

DB

SACC2011

-TDDL
SACC2011




Trade /User

 

 
User

User1  User1-M 

User2

User2-M

User1-S User2-S

Trade

SACC2011


SACC2011


SACC2011



TAtomDataSource

User1-M

User1-S

User2-M

User2-S

TDataSource

 

TGroupDataSource

SACC2011

-
Master
Slave
SACC2011

-

Slave

Master1

Slave1-1

Slave1-2

SQL->->  Mysql
SACC2011

-DbProxy
· Client->DBClient->Server->DB
SACC2011

 · SQL · Client->DBClient->Server->DB ·  · 
SACC2011

TDDL

LoadBalance

CDN



Cache

  

WebApp

WebApp

(HSF)

  
(Notify)

Service

Service

T

T

d

d

d

d

l

l

DB Tddl DB
SACC2011

Java
SACC2011

Java-
· Notify
­  4.4Half 15/Committed 29/ 
­ 15 ­ 1.8k ­ 7878630
· HSF
­ 600+ ­ 150+
· TDDL
­ SQL30+
­ 2.8+
SACC2011

Java-
· 
­  ­  ­ 
· 
­  ­  ­ 

SACC2011

Java ·  ·  · 

SACC2011

Thanks !
SACC2011

