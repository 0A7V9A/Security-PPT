SACC2011

, 
Scourgen Hung

hoopCHINA.com
SACC2011

Agenda
· 
· 
­2004-2011 ­2011-
· 
­-Symfony ­-RabbitMQ
SACC2011


SACC2011

2004
SACC2011

2011
SACC2011


SACC2011







GoalHI







B2C



F1



HelloF1



SACC2011

2004
Web
SACC2011

2005
Web+DB
SACC2011

2006
Web DB
SACC2011

2007
Web × 3 NFS
LVS NAT
DB
SACC2011

2008

Web × 4 Web × 3 NFS

LVS DR

DB Master×
1

LVS
DR DB
Slave×3

SACC2011

2004-2008
· 
­ ­ ­
· 
­ ­LVSNATDR ­ ­

SACC2011

2009-

Web ×8 NFS

Web ×8

LVS DR

DB Master×
1

LVS
DB Slave×7 DB × 3

× 2 × 15

SACC2011

2010

CDN × T

Web×10 Web×10 NFS × 2

LVS DR

File×1

DB Master×
1

LVS
DB Slave×7 DB × 10

× 3 × 30

Memcac
hed × 10 TTServer
× 3

Redis × 5

SACC2011

2009-2010
· 
­ ­, ­
· 
­CDN ­:
APC/FileCache/Memcached ­NoSQL:
· Memcached/TTServer/Redis ­ ­ ­,API
SACC2011

2011

CDN

Web×30 Web×20 NFS×3

LVS DR

File×5

DB Master×
1

LVS
DB Slave×7 DB × 20

4 80

Memcac
hed × 40 TTServer
× 20

RabbitM
Q × 1 Redis
× 10

SACC2011

2011- Future

CDN L4

Web×30 Web×20

NFS×3 SAN

 VPN
6 50

DB Master×
1

L4
DB Slave×7 DB × 20

Memcac
hed × 40 TTServer
× 20

RabbitM
Q × 2 Redis
× 10

SACC2011

2010-2011
· CDN
­ ­
· 
­VPN
· 
­LVSL4
· NoSQL
­
· MySQL
­xtraDB ­Master/Slave

SACC2011


SACC2011

/

· 
­(POC) ­
· 
­ ­ ­
· 
­ ­ ­ ­

 



SACC2011

 · 
­
· 
­
· 
­ ­ ­
SACC2011










/ 

SACC2011

? · 
­Symfony
· SOA-
­RabbitMQ
SACC2011

Symfony





· MVC · ORM
­ Propel / Doctrine
· Filter / Form · Scaffolding · Unit Test · Debug Tool ·  · 

·  ·  ·  ·  · Don`t Repeat Yourself
 · PHP ·  · 
SACC2011

Symfony

· Yahoo Bookmarks2000

· poppen.de20020104

· phpBB4Symfony2

· SourceForce.jpSymfonywiki

· TED.comSymfony

· 

­m.hoopchina.com

­

­ ­

10

­

· liangle.com

SACC2011

Symfony · 
­  130230
· 
­ 7
· 
­ 
SACC2011

 ·  · 
­  · 
­  · 
SACC2011

 · 
­  · 
­  · 
­  · 
SACC2011



 
A

 
A



 
B



 
B

 
C

 
C

SACC2011


1.  




1.  
2. 
3. 


1.  
2. 
3. 
4.
5., 

 
SACC2011

 


1.  2.
3.
4. 5., 
SACC2011


· 
­
· 
­/ ­
· 
­ ­
· 
­

SACC2011


1. ErlangErlang
2. ""--iteye
 3.
C/C++,C#,Java,PHP,Python,Erlang,Ruby Intel I7 CPU IO 30k MPS
SACC2011

RabbitMQ
SACC2011

 · 
­ 
· 
­ SP
· Google AnalyticsGoogle
­ GAGoogle 
SACC2011


  0.6 2.7

  0.6 

SACC2011

- · 
­
· 
­
· 
­ ­
SACC2011

-




RabbitMQ

    
SACC2011

 · 
­
· 
­
· /
­
SACC2011


· Memcached 
­ getOrLock
· PHP
­ hcStrReplacement.sostr_replace 300
SACC2011


SACC2011

