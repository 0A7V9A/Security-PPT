#RSAC
SESSION ID: IDY-R05
Demystifying the Identity Capabilities of AWS for Enterprise Practitioners
Jon Lehtinen
Jon Lehtinen Director, Okta on Okta, Okta @jonlehtinen

#RSAC
Disclaimer
Presentations are intended for educational purposes only and do not replace independent professional judgment. Statements of fact and opinions expressed are those of the presenters individually and, unless expressly stated to the contrary, are not the opinion or position of RSA Conference LLC or any other cosponsors. RSA Conference does not endorse or approve, and assumes no responsibility for, the content, accuracy or completeness of the information presented. Attendees should note that sessions may be audio- or video-recorded and may be published in various media, including print, audio and video formats without further notice. The presentation template and any media capture are subject to copyright protection.
©2022 RSA Conference LLC or its affiliates. The RSA Conference logo and other trademarks are proprietary. All rights reserved.
The views and opinions expressed in this presentation are my own and not necessarily shared nor endorsed by any current or former employers, organizations or affiliates.
2

#RSAC
AWS & Identity
3

#RSAC
The Enterprise Practitioner's Conundrum

#RSAC
What This is Not
5

#RSAC
Why Can identity on AWS Seem So Hard?
Services with similar functionality Occasionally distinct application of identity across services AWS as IaaS (Infrastructure as a Service) vs. AWS as PaaS (Platform as a Service)

AWS as IaaS
You own/run/manage:
Data Applications Runtime environment Middleware OS

#RSAC
AWS owns/runs/manages:
Virtualization Hardware Storage Networking
7

AWS as PaaS
You own/run/manage:
Applications Data

#RSAC
AWS owns/runs/manages:
Runtime Middleware OS Virtualization Hardware Storage Networking
8

#RSAC
AWS IAM Taxonomy
9

#RSAC
AWS IAM
10

#RSAC
AWS IAM ­ Taxonomy
RESOURCES
The "things" within AWS IAM, like users, roles, policies, and groups. Resources are also how other AWS objects are referred to, like S3 buckets, EC2 instances, etc.

#RSAC
AWS IAM ­ Taxonomy
IDENTITIES
"AWS IAM resource objects that are used to identify and group." Think user objects, groups, and roles

#RSAC
AWS IAM ­ Taxonomy
ENTITIES
The AWS IAM resource object that AWS IAM authenticates as part of an identity transaction, e.g. AWS IAM user objects, federated users/their assumed AWS IAM roles.
13

#RSAC
AWS IAM ­ Taxonomy
PRINCIPALS
"The person or applications that uses [...] an IAM user, or an IAM role to sign in and make requests to AWS."
14

#RSAC
AWS IAM ­ Taxonomy

create, list, etc.

create, list, etc.

ACTIONS
What the principal gets to do to a resource after having been authenticated and authorized by AWS IAM
15

#RSAC
AWS IAM ­ Service Capabilities
User & Group object management Authentication of entities Credential management, including:
­ Password management and policy ­ Multifactor authentication and token management ­ Programmatic credentials
Identity federation (inbound) Authorization and authorization policy management

#RSAC
AWS IAM Authorization
17

#RSAC
AWS IAM ­ Authorization Policy Types
create, list, etc.
IDENTITY POLICIES
Policies which can be attached to identity objects to determine what the principal can do to a resource, may be AWS-managed or customer-managed.

#RSAC
AWS IAM ­ Authorization Policy Types
AND BU = SALES
INLINE POLICIES
Policies applied directly to a resource where they are written, becoming intrinsic characteristics of the resource.
19

#RSAC
AWS IAM ­ Authorization Policy Types

All available AWS admin permissions

Admin

Assumed role permissions (EC2_Admin)

EC2_Admin
PERMISSION BOUNDARIES

EC2_Admin permission boundary

The maximum entitlements which may be applied to an identity object, regardless what other policies say.

20

#RSAC
AWS IAM ­ Authorization Policy Types

All available AWS account permissions (Management Account)

Admin

Service Control Policy (EC2_Admin)

EC2_Admin
SERVICE CONTROL POLICIES

Assumed role service control
policy

Similar to permission boundaries but applied to member accounts within an AWS Organization.

21

#RSAC
AWS IAM ­ Authorization Policy Types
ACCESS CONTROL LISTS
Determines the conditions of allowing people outside of your AWS account access to your resources from their own AWS accounts, or from the broader internet.
22

#RSAC
AWS IAM ­ Authorization Policy Types
SESSION POLICIES
Policies created and applied on the fly during assumption of roles by an entity.
23

#RSAC
AWS Authorization Policy Evaluation Flow
https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_evaluation-logic.html
24

#RSAC
Identity Services So Nice They're Doing `Em Thrice
(Sort of.)
25

#RSAC

AWS IAM
Provides user management and controls access to AWS resources

Amazon Cognito

AWS Single Sign-on

#RSAC

AWS IAM
Provides user management and controls access to AWS resources

Amazon Cognito
Provides user management and can control access to AWS resources

AWS Single Sign-on

#RSAC

AWS IAM
Provides user management and controls access to AWS resources

Amazon Cognito
Provides user management and can control access to AWS resources

AWS Single Sign-on
Provides user management and controls access to AWS accounts

#RSAC
29

#RSAC
30

#RSAC
31

#RSAC
Amazon Cognito
32

#RSAC
Amazon Cognito
33

#RSAC
Amazon Cognito
34

#RSAC
Cognito User Pools
35

#RSAC
Cognito User Pools
36

#RSAC
Cognito User Pools
37

#RSAC
Cognito Identity Pools
38

#RSAC
Cognito Identity Pools
39

#RSAC
AWS Single Sign-on
40

#RSAC
Available Identity Flows in AWS IAM
41

#RSAC
Available Identity Flows in AWS IAM
42

#RSAC
Available Identity Flows in AWS IAM
43

#RSAC
Permission Sets (Assumable Roles)
44

#RSAC
AWS Organizations
45

#RSAC
Recap for Enterprise Practitioners
46

#RSAC

IAM
Cognito
SSO Directory Service

User Management

Credential Management

Federation

Yes (IaaS)

Yes, Password (IaaS)
Yes, MFA (IaaS)

Yes (Inbound, IaaS)

AWS Resource AWS-deployed

AuthZ

App AuthN

App AuthN

Yes

No

No

App AuthZ No

Yes (PaaS)
Yes (IaaS w/ AWS IAM) Yes (PaaS)

Yes, Password Yes (OP/RP, User Yes (Identity

Yes

(PaaS)

Pools)

Pools AWS STS

Yes, MFA (PaaS) Yes (Inbound, Identity Pools)

for resource access)

Yes, Password (IaaS)
Yes, MFA (IaaS)

Yes (Workforce)
Yes (AWS accounts)

Yes (through AWS IAM)

Yes (through AWS IAM)

Yes (User Pools) Yes (Workforce)

Conditionally Yes (Identity Pools w/ deep AWS integration)
Yes (Workforce)

Yes

Yes, Password No

Conditionally Yes (AD

Yes (AD

Yes (AD

(AD as AWS

Yes (If used as workloads, AWS workloads, AWS workloads, AWS

IAM/AWS SSO

AWS SSO user SSO user store) SSO user store) SSO user store)

User Store)

store)

#RSAC
Things to Remember & Next Steps
AWS IAM will always ultimately control access to AWS resources Use AWS SSO to simplify the authorization constructs of AWS IAM and bridge the platform-centric mindset with a use casedriven mindset AWS SSO and AWS Organizations make administrative LCM and access to AWS accounts much easier Refine authorization when using AWS SSO & AWS Organization via additional policies in AWS IAM
48

#RSAC
Things to Remember & Next Steps, cont.
Amazon Cognito provides identity services for applications. It is good for enterprise-developed applications, assuming you connect the User Pool to your enterprise IDP
Cognito Identity Pools plus AWS STS allows Cognito identities to access AWS resources like any other AWS IAM principal. This is good for app teams w/ deep AWS integration
AWS Directory Service is useful for organizations that us AD as their user store. AWS Directory Service can populate AWS IAM directly, but it's easier to use it as AWS SSO's user store
49

#RSAC
Questions?
Jon Lehtinen jon.lehtinen@okta.com jlehtinen@idpro.org @jonlehtinen
50

